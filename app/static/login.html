<form id="login-form">
  <input type="text" name="username" placeholder="Username" required>
  <input type="password" name="password" placeholder="Password" required>
  <button type="submit">Login</button>
</form>
<div id="error" class="error"></div>

<script>
document.getElementById('login-form').addEventListener('submit', async (e) => {
  e.preventDefault();

  const data = Object.fromEntries(new FormData(e.target).entries());

  const resp = await fetch('/login', {  // ✅ саме на твій ендпоінт
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify(data)
  });

  const json = await resp.json();
  if (resp.ok) {
    // Можна зберегти токен в localStorage для наступних запитів
    localStorage.setItem('token', json.access_token);
    window.location.href = '/strategy_dashboard.html';
  } else {
    document.getElementById('error').textContent = json.detail || 'Invalid username or password';
  }
});
</script>
